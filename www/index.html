<!DOCTYPE html>
<!--
    Copyright (c) 2012-2016 Adobe Systems Incorporated. All rights reserved.

    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
     KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.
-->
<html>

<head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
    <!-- This is a wide open CSP declaration. To lock this down for production, see below. -->
    <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline'; style-src * 'unsafe-inline'; media-src *" />
    
    
    <script src="js/firebase.js"></script>
  <script src='js/jquery.js'></script>
    <!-- Good default declaration:
    * gap: is required only on iOS (when using UIWebView) and is needed for JS->native communication
    * https://ssl.gstatic.com is required only on Android and is needed for TalkBack to function properly
    * Disables use of eval() and inline scripts in order to mitigate risk of XSS vulnerabilities. To change this:
        * Enable inline JS: add 'unsafe-inline' to default-src
        * Enable eval(): add 'unsafe-eval' to default-src
    * Create your own at http://cspisawesome.com
    -->
    <!-- <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: 'unsafe-inline' https://ssl.gstatic.com; style-src 'self' 'unsafe-inline'; media-src *" /> -->

    <title>7 Starter</title>
    
       <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <!-- Path to Framework7 Library CSS-->
    <link rel="stylesheet" href="css/framework7.material.min.css">
    <link rel="stylesheet" href="css/framework7.material.colors.min.css">
    <!-- Path to your custom app styles-->
    <link rel="stylesheet" href="css/my-app.css">
    
</head>

<body class="theme-green">


  
  <div class="views">
      <!-- Your main view, should have "view-main" class -->
      <div class="view view-main">
        <!-- Pages container, because we use fixed navbar and toolbar, it has additional appropriate classes-->
        <div class="pages navbar-fixed toolbar-fixed">
          <!-- Page, "data-page" contains page name -->
          <div data-page="index" class="page">
 
            <!-- Top Navbar. In Material theme it should be inside of the page-->
            <div class="navbar">
              <div class="navbar-inner">
                <div class="center">Doctor Dial</div>
              </div>
              
                 <!-- Sub navbar -->
    <div class="subnavbar">
        <!-- Sub navbar content, for example tabs buttons -->
        <div class="buttons-row">
            <a href="#tab1" class="button active">My Doc</a>
            <a href="#tab2" class="button">Find</a>
            <a href="#tab3" class="button">History</a>
        </div>
    </div>
            </div>
 
            <!-- Bottom Toolbar. In Material theme it should be inside of the page-->
            <div class="toolbar toolbar-bottom">
              <div class="toolbar-inner">
                <!-- Toolbar links -->
                <a href="#" class="link">Link 1</a>
                <a href="#" class="link">Link 2</a>
              </div>
            </div>
 
            <!-- Scrollable page content -->
              <!-- messagebar -->
				  <div class="toolbar messagebar theme-white" style="border: 1px solid #c0c2c0;">
				    <div class="toolbar-inner">
				      <textarea placeholder="Message" id='messageInput'></textarea><a href="#" class="link theme-green" id="sendMessageButton">Send</a>
				    </div>
				  </div>
				  <!-- messages-content -->
				  
  
			<div class="page-content messages-content">
			
			<!-- CHAT MARKUP -->
			<div class="example-chat l-demo-container">
			  <div class='example-chat-toolbar'>
			    <label for="nameInput">Username:</label>
			    <input type='text' id='nameInput' placeholder='enter a username...'>
			  </div>
			</div>
			
			
			    <div class="messages">
			    <ul class="message-list">
			    
			      <!-- Date stamp -->
			      <div class="messages-date">Sunday, Feb 9 <span>12:58</span></div>
			 
			      <!-- Sent message (by default - green and on right side) -->
			      <div class="message message-sent">
			        <!-- Bubble with text -->
			        <div class="message-text">Hello</div>
			      </div>
			 
			      <!-- Another sent message -->
			      <div class="message message-sent">
			        <!-- Bubble with text -->
			        <div class="message-text">How are you?</div>
			      </div>
			 
			      <!-- Received message (by default - grey on left side) -->
			      <div class="message message-with-avatar message-received">
			        <!-- Sender name -->
			        <div class="message-name">Kate</div>
			 
			        <!-- Bubble with text -->
			        <div class="message-text">I am fine, thanks</div>
			 
			        <!-- Sender avatar -->
			        <div style="background-image:url(http://lorempixel.com/output/people-q-c-100-100-9.jpg)" class="message-avatar"></div>
			      </div>
			 
			      <!-- Another date stamp -->
			      <div class="messages-date">Sunday, Feb 3 <span>11:58</span></div>
			 
			      <!-- Sent message with image -->
			      <div class="message message-pic message-sent">
			        <!-- Bubble with image -->
			        <div class="message-text"><img src="http://lorempixel.com/300/300/"></div>
			        <!-- Message label -->
			        <div class="message-label">Delivered 2 days ago</div>
			      </div>
			      	
			    </ul>
			    </div>
			  </div>
            
            <div class="page-content">
              
			          
			

			<!-- CHAT JAVACRIPT -->
			<script>
			
			var scrolled = 0;
			  // CREATE A REFERENCE TO FIREBASE
			  var messagesRef = new Firebase('https://doctordial.firebaseio.com/');

			  // REGISTER DOM ELEMENTS
			  var messageField = $('#messageInput');
			  var nameField = $('#nameInput');
			  var messageList = $('.message-list');
			  var sendMessageButton = $('#sendMessageButton');

			  // LISTEN FOR KEYPRESS EVENT
			  sendMessageButton.click(function (e) {
			      //FIELD VALUES
			      var username = nameField.val();
			      var message = messageField.val();
                  messageField.val('');
			      if(message != ''){
			      	 
			      //SAVE DATA TO FIREBASE AND EMPTY FIELD
			      messagesRef.push({name:username, text:message});
			      
			      }
			     
			    scrolled=scrolled-300;
			        $(".message-list").animate({
			          scrollTop:  scrolled
			     });
			  });

			  // Add a callback that is triggered for each chat message.
			  messagesRef.limitToLast(10).on('child_added', function (snapshot) {
			    //GET DATA
			    var data = snapshot.val();
			    var username = data.name || "anonymous";
			    var message = data.text;

			    //CREATE ELEMENTS MESSAGE & SANITIZE TEXT
			    var messageElement = $$('<li>');
			    var nameElement = $$("<strong class='example-chat-username'></strong>");
			    nameElement.text(username+" ");
			    messageElement.text(message).prepend(nameElement);

			    //ADD MESSAGE
			    messageList.append(messageElement)

			    //SCROLL TO BOTTOM OF MESSAGE LIST
			    messageList[0].scrollTop = messageList[0].scrollHeight;
			   
			  });
			</script>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Path to Framework7 Library JS-->
    <script type="text/javascript" src="js/framework7.min.js"></script>
    <!-- Path to your app js-->
    <script type="text/javascript" src="js/my-app.js"></script>
    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript">
        app.initialize();
    </script>
</body>

</html>